(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const f of o.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&c(f)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();let r;const g=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&g.decode();let _=null;function y(){return(_===null||_.byteLength===0)&&(_=new Uint8Array(r.memory.buffer)),_}function p(e,t){return e=e>>>0,g.decode(y().subarray(e,e+t))}typeof FinalizationRegistry>"u"||new FinalizationRegistry(e=>r.__wbg_dino_free(e>>>0,1));typeof FinalizationRegistry>"u"||new FinalizationRegistry(e=>r.__wbg_obstacle_free(e>>>0,1));const d=typeof FinalizationRegistry>"u"?{register:()=>{},unregister:()=>{}}:new FinalizationRegistry(e=>r.__wbg_world_free(e>>>0,1));class h{__destroy_into_raw(){const t=this.__wbg_ptr;return this.__wbg_ptr=0,d.unregister(this),t}free(){const t=this.__destroy_into_raw();r.__wbg_world_free(t,0)}constructor(){const t=r.world_new();return this.__wbg_ptr=t>>>0,d.register(this,this.__wbg_ptr,this),this}update(t){r.world_update(this.__wbg_ptr,t)}jump(){r.world_jump(this.__wbg_ptr)}get_dino_x(){return r.world_get_dino_x(this.__wbg_ptr)}get_dino_y(){return r.world_get_dino_y(this.__wbg_ptr)}get_score(){return r.world_get_score(this.__wbg_ptr)>>>0}get_obstacle_count(){return r.world_get_obstacle_count(this.__wbg_ptr)>>>0}get_obstacle_x(t){return r.world_get_obstacle_x(this.__wbg_ptr,t)}}async function m(e,t){if(typeof Response=="function"&&e instanceof Response){if(typeof WebAssembly.instantiateStreaming=="function")try{return await WebAssembly.instantiateStreaming(e,t)}catch(c){if(e.headers.get("Content-Type")!="application/wasm")console.warn("`WebAssembly.instantiateStreaming` failed because your server does not serve Wasm with `application/wasm` MIME type. Falling back to `WebAssembly.instantiate` which is slower. Original error:\n",c);else throw c}const n=await e.arrayBuffer();return await WebAssembly.instantiate(n,t)}else{const n=await WebAssembly.instantiate(e,t);return n instanceof WebAssembly.Instance?{instance:n,module:e}:n}}function x(){const e={};return e.wbg={},e.wbg.__wbindgen_init_externref_table=function(){const t=r.__wbindgen_export_0,n=t.grow(4);t.set(0,void 0),t.set(n+0,void 0),t.set(n+1,null),t.set(n+2,!0),t.set(n+3,!1)},e.wbg.__wbindgen_throw=function(t,n){throw new Error(p(t,n))},e}function R(e,t){return r=e.exports,w.__wbindgen_wasm_module=t,_=null,r.__wbindgen_start(),r}async function w(e){if(r!==void 0)return r;typeof e<"u"&&(Object.getPrototypeOf(e)===Object.prototype?{module_or_path:e}=e:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof e>"u"&&(e=new URL("/robo-dino/assets/rust_dino_bg-DD38PoVb.wasm",import.meta.url));const t=x();(typeof e=="string"||typeof Request=="function"&&e instanceof Request||typeof URL=="function"&&e instanceof URL)&&(e=fetch(e));const{instance:n,module:c}=await m(await e,t);return R(n,c)}const a=document.getElementById("game"),s=a.getContext("2d");let l,u=0;function A(){s.clearRect(0,0,a.width,a.height);const e=l.get_dino_x(),t=l.get_dino_y(),n=l.get_score();s.fillStyle="brown",s.fillRect(0,a.height-20,a.width,20),s.fillStyle="green";const c=a.height-20-t-20;s.fillRect(e,c,20,20);for(let i=0;i<l.get_obstacle_count();i++){const o=l.get_obstacle_x(i),f=a.height-20-30;s.fillStyle="red",s.fillRect(o,f,20,30)}s.fillStyle="black",s.font="16px monospace",s.fillText(`Score: ${n}`,10,20)}function b(e){const t=(e-u)/1e3;u=e,l.update(t),A(),requestAnimationFrame(b)}function F(){a.addEventListener("click",()=>l.jump()),requestAnimationFrame(b)}w().then(()=>{l=new h,F()});
